{% extends "draw_rbase.html" %}

{% load debate_tags %}


{% block extra-head %}
    <script type="text/javascript">
        $(document).ready(function(){
            var table = $('#dataTable').DataTable({
                "aaSorting": [[ 0, "desc" ]],
            });
            new $.fn.dataTable.FixedHeader( table );
        });
    </script>
{% endblock %}

{% block head-title %}Results for Round {{ round }}{% endblock %}
{% block page-title %}Results for Round {{ round }}{% endblock %}
{% block body-class %}results{% endblock %}

{% block header %}
<div class="btn-group">
    <button class="btn btn-default btn-danger"><span class="label none">{{ stats.none }} No Ballots <span class="glyphicon glyphicon-remove"></span></span></button>
    <button class="btn btn-default btn-warning"><span class="label ballotin">{{ stats.ballot_in }} Ballots in <span class="glyphicon glyphicon-inbox"></span></span></button>
    <button class="btn btn-default btn-info"><span class="label unconfirmed">{{ stats.draft }} Unconfirmed <span class="glyphicon glyphicon-adjust"></span></span></button>
    <button class="btn btn-default btn-success"><span class="label confirmed">{{ stats.confirmed }} Confirmed <span class="glyphicon glyphicon-ok"></span></span></button>
</div>
{% endblock %}

{% block content %}



<table id="dataTable" class="table table-hover table-bordered" cellpadding="0" cellspacing="0">

    <thead>
        <tr>
            <th><span class="glyphicon glyphicon-th-list" data-toggle="tooltip" title="Ballot Status"></span></th>
            <th>Results</th>
            <th><span class="glyphicon glyphicon-sort" data-toggle="tooltip" title="Bracket"></span></th>
            <th><span class="glyphicon glyphicon-map-marker" data-toggle="tooltip"title="Venue"></span></th>
            <th>Affirmative</th>
            <th>Negative</th>
            <th>Adjudicators</th>
        {% if show_motions_column %}<th>Motion</th>{% endif %}
        </tr>
    </thead>

    <tbody>

    {% for debate in draw %}
        <tr class=" {% ifequal debate.result_status "N" %}danger {% endifequal %}
                    {% ifequal debate.result_status "B" %}warning {% endifequal %}
                    {% ifequal debate.result_status "D" %}info {% endifequal %}
                    {% ifequal debate.result_status "C" %}success{% endifequal %}
        ">


            {% ifequal debate.result_status "N" %}
                <td>
                    <span class="hidden">0</span>
                    <a href="{% tournament_url enter_result debate.id %}" data-toggle="tooltip" title="No Ballot (click to edit)">
                    <span class="glyphicon glyphicon-remove text-danger"></span>
                </a></td>
                <td><a href="{% tournament_url enter_result debate.id %}" title="Add Ballot">Add Ballot</a></td>
            {% endifequal %}
            {% ifequal debate.result_status "B" %}
                <td>
                    <span class="hidden">1</span>
                    <a href="{% tournament_url enter_result debate.id %}" data-toggle="tooltip" title="Ballot In (click to edit)">
                    <span class="glyphicon glyphicon-inbox text-warning"></span>
                </a></td>
                <td><a href="{% tournament_url enter_result debate.id %}" title="Add Ballot">Edit Ballot</a></td>
            {% endifequal %}
            {% ifequal debate.result_status "D" %}
                <td>
                    <span class="hidden">2</span>
                    <a href="{% tournament_url enter_result debate.id %}" data-toggle="tooltip" title="Unconfirmed Ballot (click to edit)">
                    <span class="glyphicon glyphicon-adjust text-info"></span>
                </a></td>
                <td><a href="{% tournament_url enter_result debate.id %}" data-toggle="tooltip" title="Confirm Ballot">Confirm Ballot</a></td>
            {% endifequal %}
            {% ifequal debate.result_status "C" %}
                <td>
                    <span class="hidden">3</span>
                    <a href="{% tournament_url enter_result debate.id %}" data-toggle="tooltip" title="Confirmed Ballot (click to edit)">
                    <span class="glyphicon glyphicon-ok text-success"></span>
                </a></td>
                <td></td>
            {% endifequal %}

            <td>{{ debate.bracket }}</td>

            <td>{{ debate.venue.name }}</td>

            <td class="{% if debate.result.aff_win %}winner{% endif %}">
                {% if debate.result.aff_win == 1 %}
                    <span class="glyphicon glyphicon-arrow-up text-success"></span>
                {% else %}
                    <span class="glyphicon glyphicon-arrow-down text-danger"></span>
                {% endif %}
                <span href="#" title="{{ debate.aff_team.speakers|join:', ' }}" data-toggle="tooltip">
                    {{ debate.aff_team.name }}
                </span>
            </td>

            <td class="{% if debate.result.neg_win %}winner{% endif %}">
                {% if debate.result.neg_win == 1 %}
                    <span class="glyphicon glyphicon-arrow-up text-success"></span>
                {% else %}
                    <span class="glyphicon glyphicon glyphicon-arrow-down text-danger"></span>
                {% endif %}
                <span href="#" title="{{ debate.neg_team.speakers|join:', ' }}" data-toggle="tooltip">
                    {{ debate.neg_team.name }}
                </span>
            <td>{{ debate.adjudicators_display }}</td>

            {% if show_motions_column %}
                <td class="">{{ debate.motion.reference }}</td>
            {% endif %}
        </tr>
    {% endfor %}
</table>

{% endblock content %}