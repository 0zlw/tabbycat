{% extends "draw_rbase.html" %}

{% load debate_tags %}

{% block extra-head %}
    <script type="text/javascript" charset="utf-8">

        $(document).ready( function() {
            $("#dataTable").dataTable( {
                "bPaginate": false,
                "aaSorting": [[0, 'desc']]
            } );

        } );

    </script>
    <style>
        #stats { text-align: left; }
        #stats .none { color: red; }
        #stats .ballotin { color: orange; }
        #stats .unconfirmed { color: blue; }
        #stats .confirmed { color: green; }
    </style>
{% endblock extra-head %}

{% block extra-style %}
    @import "/static/css/demo_table.css";
{% endblock %}

{% block h1 %} Results for Round {{ round }}{% endblock %}

{% block content %}

<table id="stats">
    <tr class="none"><th>No ballot</th><td>{{ stats.none }}</td></tr>
    <tr class="ballotin"><th>Ballot in</th><td>{{ stats.ballot_in }}</td></tr>
    <tr class="unconfirmed"><th>Unconfirmed</th><td>{{ stats.draft }}</td></tr>
    <tr class="confirmed"><th>Confirmed</th><td>{{ stats.confirmed }}</td></tr>
</table>

<table id="dataTable" class="display" cellpadding="0" cellspacing="0">
    <thead>
        <tr><th>Bracket</th><th>Venue</th><th>Affirmative</th><th>Negative</th><th>Adjudicators</th>
        {% if show_motions_column %}<th>Motion</th>{% endif %}
        <th>Status</th></tr>
    </thead>
    <tbody>
    {% for debate in draw %}
    <tr class="
    {% ifequal debate.result_status "N" %}inactive {% endifequal %}
    {% ifequal debate.result_status "B" %}conflict {% endifequal %}
    {% ifequal debate.result_status "C" %}active{% endifequal %}
    ">
        <td>{{ debate.bracket }}</td>
        <td>{{ debate.venue.name }}</td>
        <td class="{% if debate.result.aff_win %}winner{% endif %}">
            <a href="#" title="{{ debate.aff_team.speakers|join:', ' }}">{{ debate.aff_team.name }}</a> {{ debate.result.aff_win|yesno:"(win),(loss)," }}
        </td>
        <td class="{% if debate.result.neg_win %}winner{% endif %}">
            <a href="#" title="{{ debate.neg_team.speakers|join:', ' }}">{{ debate.neg_team.name }}</a> {{ debate.result.neg_win|yesno:"(win),(loss), " }}</td>
        <td>{{ debate.adjudicators_display }}</td>
        {% if show_motions_column %}
            <td>{{ debate.motion.reference }}</td>
        {% endif %}
        <td>
            <a href="{% tournament_url enter_result debate.id %}">
            {% ifequal debate.result_status "N" %}No ballot{% endifequal %}
            {% ifequal debate.result_status "B" %}Ballot in{% endifequal %}
            {% ifequal debate.result_status "D" %}Unconfirmed{% endifequal %}
            {% ifequal debate.result_status "C" %}Confirmed{% endifequal %}
            </a>
        </td>
    </tr>
    {% endfor %}
</table>

{% endblock content %}


