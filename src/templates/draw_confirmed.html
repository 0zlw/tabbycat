{% extends "base.html" %}

{% block extra-head %}
    <script type="text/javascript" charset="utf-8">

        $(document).ready( function() {
            $("#allocateAdj").click( function() {
                $("#allocateAdjForm").submit();

                return false;
            } );

            $("#dataTable").dataTable( {
                "bPaginate": false
            } );

        } );

    </script>
{% endblock extra-head %}

{% block extra-style %}
    @import "/static/css/demo_table.css";
{% endblock %}

{% block h1 %} Draw for Round {{ round }} (Debates Confirmed){% endblock %}

{% block content %}

<p>
Here's the confirmed draw. <a href="" id="allocateAdj">Allocate adjudicators</a>.
</p>

<form id="allocateAdjForm" method="POST" action="{% url create_adj_allocation round.id %}">
</form>

<table id="dataTable" class="display" cellpadding="0" cellspacing="0">
    <thead>
        <tr><th>Bracket</th><th>Venue</th><th>Affirmative</th><th>Negative</th><th>Adjudicators</th><th>Conflict</th></tr>
    </thead>
    <tbody>
    {% for debate in draw %}
    <tr class="{{ debate.all_conflicts|yesno:'conflict,' }}">
        <td>{{ debate.bracket }}</td>
        <td>{{ debate.venue.name }}</td>
        <td>{{ debate.aff_team.name }}</td>
        <td>{{ debate.neg_team.name }}</td>
        <td>{{ debate.adjudicators_display }}</td>
        <td>{{ debate.all_conflicts|join:", " }}</td>
    </tr>
    {% endfor %}
</table>

{% endblock content %}


