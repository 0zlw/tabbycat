{% extends "draw_rbase.html" %}

{% load debate_tags %}

{% block extra-head %}
    <script type="text/javascript" charset="utf-8">

        $(document).ready( function() {
            $("#confirmDraw").click( function() {
                $("#confirmForm").submit();
                return false;
            } );

            var table = $("#dataTable").dataTable( {
                "aaSorting": [[0, 'desc']]
            } );
            new $.fn.dataTable.FixedHeader( table );

        } );

    </script>
{% endblock extra-head %}

{% block head-title %}Draw for Round {{ round }} <small>(DRAFT)</small>{% endblock %}
{% block page-title %}Draw for Round {{ round }} <small>(DRAFT)</small>{% endblock %}
{% block header %}
    <div class="status btn-group">
        <button id="confirmDraw" class="btn btn-default" >Confirm Draw</button>
    </div>
{% endblock %}

{% block content %}

<form id="confirmForm" method="POST" action="{% round_url confirm_draw %}"></form>

<table id="dataTable" class="table table-hover table-bordered table-striped" cellpadding="0" cellspacing="0">
    <thead>
        <tr>
            <th><span class="glyphicon glyphicon-sort" data-toggle="tooltip" title="Bracket"></span></th>
            <th>Affirmative</th>
            <th>Negative</th>
            <th>Conflict</th>
        </tr>
    </thead>
    <tbody>
    {% for debate in draw %}
    <tr class="{{ debate.draw_conflicts|yesno:'conflict,' }}">
        <td>{{ debate.bracket }}</td>
        <td>{{ debate.aff_team }}</td>
        <td>{{ debate.neg_team }}</td>
        <td>{{ debate.draw_conflicts|join:"," }}</td>
    </tr>
    {% endfor %}
</table>

{% endblock content %}