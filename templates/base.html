{% load static %}{% load debate_tags %}<!DOCTYPE html>
<html lang="en">
<head>

  <meta >
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block page-title %}{% endblock %}</title>
  <link rel="icon" type="image/png" href="/static/favicon.ico" />
  <!--[if IE]><link rel="shortcut icon" href="{% static 'favicon.ico' %}"/><![endif]-->
  <link rel="stylesheet" type="text/css" href="{% static 'css/style.min.css' %}" />
  {% block extra-css %}{% endblock %}
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->

</head>

<body id="{% block body-id %}{% endblock %}" class="">

{% block body %}

  {% block nav %}
    {% if 'admin/' in request.path and user.is_superuser %}
      {% include "nav/admin_nav.html" %}
  <div class="col-md-12 accommodate-footer nav-sidebar-offset">
    {% else %}
      {% include "nav/top_nav_base.html" %}
  <div class="col-md-12 accommodate-footer">
    {% endif %}
  {% endblock %}

    {% block header %}
    <div class="row head-title {% if 'admin/' in request.path and user.is_superuser %}white-bg vertical-spacing{% endif %}">
      <div class="col-md-12">
        <h3>
          {% block head-title %}{% endblock %}
          <small class="pull-right">
            {% block sub-title %}{% endblock %}
          </small>
        </h3>
      </div>
    </div>
    {% endblock %}

    <div class="row ">
      <div class="col-md-12 hidden-print page-sub-nav">
        <ul class="nav nav-pills navbar-left">
          {% block page-subnav-sections %}{% endblock %}
        </ul>
        <div class="nav btn-group navbar-right">
          {% block page-subnav-actions %}{% endblock %}
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12">
        {% if messages %}
          <div class="form-inline hidden-print" id="messages">
            {% for message in messages %}
              <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %} updated alert-dismissable">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                {{ message }}
              </div>
            {% endfor %}
          </div>
        {% endif %}
        {% block page-alerts %}{% endblock %}
      </div>
    </div>

    {% block content %}{% endblock content %}

    {% if 'admin/' not in request.path %}
      </div><!-- /.main-col -->
    {% endif %}

    {% block footer %}{% include "footer.html" %}{% endblock footer %}

    {% if 'admin/' in request.path %}
      </div><!-- /.main-col -->
    {% endif %}

  {% endblock body %}

  <!-- Dependencies and JS for all pages -->

    {% if 'admin/' not in request.path %}
      <script src="{% static 'js/vendor/vendor-public.min.js' %}"></script>
    {% else %}
      <script src="{% static 'js/vendor/vendor-admin.min.js' %}"></script>
      <script>
        jQuery.extend( true, $.fn.dataTable.defaults, {
          // Default Data Table options
          "sDom":
            "<'row'<'table-container'lr" + "t"+ "f<p>",
          "bPaginate": false,
          "oLanguage": {
            "sSearch": "Search: "
          }
        });
        $(document).ready(function(){
          // Enable hover tooltips for all elements
          $('[data-toggle=tooltip]').tooltip({
            'html': true,
            'placement': 'bottom'
          });
          // Disable buttons post submission
          $('.submit-disable').on('click', function () {
            var $btn = $(this).button('loading');
          });
          // Popovers for team names
          $('[data-toggle="popover"]').popover({
            trigger: 'hover',
            container: 'body',
            content: getTeamSpeakers,
            html: true,
            placement: 'bottom'
          });
          // Dynamic lookup speakers on hover
          var cachedData = Array();
          function getTeamSpeakers(){
            var id = $(this).attr('id').replace("team_speakers_", "");
            var localData = "error";
            $.ajax('{{ tournament.get_public_url }}participants/team_list/' + id + '/', {
              async: false,
              success: function(data){
                localData = data[0] + data[1] + data[2];
              }
            });
            return localData;
          }
        });
      </script>
    {% endif %}
    <script>
      {% if debug %}Vue.config.debug = true;{% endif %}
      Vue.config.delimiters = ["[[", "]]"];
    </script>

  <!-- Page specific JS and dependencies -->
  {% block extra-js %}{% endblock extra-js %}

  <!-- Analytics -->
  {% if not debug %}
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-314178-25', 'auto');
      ga('send', 'pageview');
    </script>
  {% endif %}

</body>
</html>
