{% extends "base.html" %}
{% load add_field_css %}

{% load debate_tags %}

{% block extra-head %}

{% include "enter_results_head.html" %}

{% if ballots.submitter_type == ballots.SUBMITTER_PUBLIC %}
<script>
    $(document).ready(function() {
        function preSubmit() {
            $('#ballot_set input').removeAttr('readonly');
            $('#ballot_set select').removeAttr('disabled');
        }
        $('#ballot_set input[type="text"]').attr('readonly', 'true');
        $('#ballot_set select').attr('disabled', 'true');
        $('#submit').click(function() {
            preSubmit();
        });
    });

</script>
{% endif %}

{% endblock %}

{% block head-title %}
{% if new %}
New Ballot Set for
{% else %}
Edit Ballot Set for
{% endif %}
{{ debate.matchup }} <small>Round {{ debate.round }} @ {{ debate.venue.name }}</small>
{% endblock %}
{% block page-title %}{{ debate.matchup }} <small>Round {{ debate.round }} @ {{ debate.venue.name }}</small>{% endblock %}
{% block body-class %}monkey-enter-result{% endblock %}

{% block content %}

{% include "other_ballots_list.html" %}

{% if not new %}
<div class="row">
    <a href="{% tournament_url new_ballots debate.id %}">Create a new ballot set for this debate</a>
</div>
{% endif %}

<form id="resultsForm" class="form-horizontal" action="." method="POST">
    <div id="ballot_set">
        {% include "enter_results_ballot_set.html" %}
    </div>
        <!-- TODO fix this -->
    <div class="row">
        <h3 class="col-sm-12 page-header lead">Ballot Status</h3>
    </div>
    <div class="row">
        <div class="form-group">

            <label class="col-sm-2 col-xs-1 control-label">This ballot is discarded</label>
            <div class="col-sm-2 col-xs-6">
                {{ form.discarded }}
            </div>
        </div>
    </div>

    <div class="row">
        <div class="form-group">
            <label class="col-sm-2 col-xs-1 control-label">This is the confirmed ballot</label>
            <div class="col-sm-2 col-xs-6">
                {{ form.confirmed }}
            </div>
        </div>
    </div>
    <div class="row">
        <h3 class="col-sm-12 page-header lead">Debate Status</h3>
    </div>
    <div class="row">
        <div class="col-sm-12">Note: This is the status of the debate, not just this ballot set (if there is more than one for this debate).</div>
    </div>
    <div class="row">
        <div class="form-group">
            <label class="col-sm-1 col-xs-1 control-label"></label>
            <div class="col-sm-2 col-xs-6">
                {{ form.debate_result_status|addcss:"form-control" }}
            </div>
            <div class="col-sm-2 col-md-1 col-xs-4">
                <input id="submit" class="save form-control btn btn-default" type="submit" value="Save" tabindex="101" />
            </div>
            <!-- TODO fix this -->
            <div class="col-sm-2 col-md-1 col-xs-4">
                <a href="{% round_url results %}">Cancel</a>
            </div>
        </div>
    </div>

</form>


{% endblock content %}

