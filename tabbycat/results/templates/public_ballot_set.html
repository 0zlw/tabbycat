{% extends "base.html" %}
{% load debate_tags i18n %}


{% block page-title %}{% blocktrans trimmed with matchup=debate.matchup %}
  Ballot for {{ matchup }}
{% endblocktrans %}{% endblock %}
{% block head-title %}{% blocktrans trimmed with matchup=debate.matchup %}
  Ballot for {{ matchup }}
{% endblocktrans %}{% endblock %}
{% block sub-title %}
    {{ debate.round.name }} @
    {% if debate.division.venue_category %}
      {{ debate.division.venue_category.short_name }}
    {% endif %}
    {{ debate.venue.display_name }}
{% endblock %}

{% block page-subnav-sections %}
<div class="btn-group">
  <a class="btn btn-primary" href="{% roundurl 'results-public-round' debate.round %}">
    <i data-feather="chevron-left"></i>
    {% blocktrans trimmed with round_name=debate.round.name %}
      Return to Results for {{ round_name }}
    {% endblocktrans %}
  </a>
</div>
{% endblock %}

{% block content %}

  <div class="card">
    <div class="panel-heading">
      <h4 class="panel-title">Motion</h4>
    </div>
    <div class="card-body">
      {{ motion.text }}
    </div>
  </div>

  {% for sheet in result.as_dicts %}

    <div class="card">

      <div class="panel-heading">
        <h4 class="panel-title">
          {% if sheet.adjudicator %}
            {% blocktrans trimmed with name=sheet.adjudicator.name institution=sheet.adjudicator.institution.code %}
              From {{ name }} ({{ institution }})
            {% endblocktrans %}
          {% else %}
            {% trans "Scoresheet" %}
          {% endif %}
        </h4>
      </div>

      <div class="card-body">
        {% for team in sheet.teams %}
          <ul class="list-group col-md-6 no-bottom-margin">
            {% for position in team.speakers %}
              <li class="list-group-item">
                <div class="col-md-2 col-xs-3 strong">{{ position.name }}</div>
                {{ position.speaker }}
                <span class="badge badge-secondary">{{ position.score }}</span>
              </li>
            {% endfor %}
            <li class="list-group-item list-group-item-{{ team.win_style }}">
              <div class="col-md-2 col-xs-3"></div>
              <em>Total for {{ team.team.short_name }} ({{ team.side }})</em>
              <span class="badge badge-secondary">{{ team.total }}</span>
            </li>
          </ul>
        {% endfor %}
      </div>

    </div>

  {% endfor %}

{% endblock %}
