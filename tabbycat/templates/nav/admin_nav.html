{% load debate_tags static i18n %}

<div class="list-group border-0 card text-center text-md-left" id="sidebar" data-children=".list-group-item">

  <div class="list-group-item d-inline-block">
    <a href="#tlisth" data-toggle="collapse" data-parent="#sidebar" aria-expanded="false"
      class="tournament-title d-flex justify-content-between align-items-center">
      <div>
        <img src="{% static 'logo.svg' %}" class="d-md-block d-none" width="24" height="24" alt="">
        <img src="{% static 'logo.svg' %}" class="d-md-none" width="20" height="20" alt="">
      </div>
      <div class="mb-0 d-none d-md-inline h6 mr-auto pt-1 pl-1 pr-2">
        {{ tournament }}
      </div>
      <div>
        <i data-feather="chevron-down" class="sidebar-expand d-none d-md-inline"></i>
        <i data-feather="chevron-up" class="sidebar-expand d-none d-md-inline"></i>
      </div>
    </a>
    <div class="collapse" id="tlisth">
      {% for t in all_tournaments %}
        <a href="{% url 'tournament-admin-home' tournament_slug=t.slug %}" class="list-group-item" data-parent="#titleh">
          <i data-feather="settings"></i>{% blocktrans trimmed %}{{ t }} (admin){% endblocktrans %}
        </a>
        <a href="{% url 'tournament-assistant-home' tournament_slug=t.slug %}" class="list-group-item" data-parent="#titleh">
          <i data-feather="pocket"></i>{% blocktrans trimmed %}{{ t }} (assistant){% endblocktrans %}
        </a>
        <a href="{% url 'tournament-public-index' tournament_slug=t.slug %}" class="list-group-item" data-parent="#titleh">
          <i data-feather="globe"></i>{{ t }}
        </a>
      {% endfor %}
      <a href="/" class="list-group-item" data-parent="#titleh">
        <i data-feather="home"></i>Site Home
      </a>
      <a href="{% url 'tournament-create' %}" class="list-group-item" data-parent="#titleh">
        <i data-feather="edit-2"></i>New Tournament
      </a>
    </div>
  </div>

  <div class="list-group-item d-inline-block">
    <a href="{% tournamenturl 'tournament-admin-home' %}" data-parent="#sidebar"
       class="collapsed {% if overview_nav %}active{% endif %}">
      <i data-feather="monitor"></i>
      <span class="d-none d-md-inline">{% trans "Overview" %}</span>
    </a>
  </div>

  <div class="list-group-item d-inline-block">
    <a href="#setuph" data-toggle="collapse" data-parent="#sidebar" aria-expanded="false"
       class="{% if options_nav %}active{% endif %}">
       <i data-feather="briefcase"></i>
       <span class="d-none d-md-inline">{% trans "Setup" %}</span>
       <i data-feather="chevron-down" class="sidebar-expand d-none d-md-inline"></i>
       <i data-feather="chevron-up" class="sidebar-expand d-none d-md-inline"></i>
    </a>
    <div class="collapse {% if options_nav %}show{% endif %}" id="setuph">
      <a href="{% tournamenturl 'options-tournament-index' %}"
         class="list-group-item {% if configuration_nav %}active{% endif %}" data-parent="#setuph">
        <span class="circle-icon small-circle"></span><i data-feather="settings"></i>{% trans "Configuration" %}
      </a>
      <a href="{% tournamenturl 'importer-simple-index' %}"
         class="list-group-item {% if import_nav %}active{% endif %}" data-parent="#setuph">
        <span class="circle-icon small-circle"></span><i data-feather="download-cloud"></i>{% trans "Import Data" %}
      </a>
      <a href="{% tournamenturl 'participants-list' %}"
         class="list-group-item {% if participants_nav %}active{% endif %}" data-parent="#setuph">
        <span class="circle-icon small-circle"></span><i data-feather="user"></i>{% trans "Participants" %}
      </a>
      <a href="{% tournamenturl 'privateurls-list' %}"
         class="list-group-item {% if private_urls_nav %}active{% endif %}"
         data-parent="#rh{{ r.id }}">
        <span class="circle-icon small-circle"></span><i data-feather="link"></i>{% trans "Private URLs" %}
      </a>
      <a href="{% url 'admin:index' %}" target="_blank" class="list-group-item" data-parent="#setuph">
        <span class="circle-icon small-circle"></span><i data-feather="edit"></i>{% trans "Edit Database" %}
      </a>
    </div>
  </div>

  {% if pref.side_allocations_enabled == 'preallocated' %}
    <div class="list-group-item d-inline-block">
      <a href="{% tournamenturl 'draw-side-allocations' %}" data-parent="#sidebar"
        class="collapsed {% if sides_nav %}active{% endif %}">
        <i data-feather="shuffle"></i>
        <span class="d-none d-md-inline">{% trans "Sides" %}</span>
      </a>
    </div>
  {% endif %}

  {% if pref.enable_divisions %}
    <div class="list-group-item d-inline-block">
      <a href="{% tournamenturl 'division_allocations' %}" data-parent="#sidebar"
         class="collapsed {% if divisions_nav %}active{% endif %}">
        <span class="circle-icon icon-container">
          <i data-feather="layers"></i>
        </span>
        {% trans "Divisions" %}
      </a>
    </div>
  {% endif %}

  <div class="list-group-item d-inline-block">
    <a href="#feedh" data-toggle="collapse" data-parent="#sidebar" aria-expanded="false"
       class="collapsed {% if feedback_nav %}active{% endif %}">
      <i data-feather="message-circle"></i>
      <span class="d-none d-md-inline">{% trans "Feedback" %}</span>
      <i data-feather="chevron-down" class="sidebar-expand d-none d-md-inline"></i>
      <i data-feather="chevron-up" class="sidebar-expand d-none d-md-inline"></i>
    </a>
    <div class="collapse {% if feedback_nav %}show{% endif %}" id="feedh">
      <a class="list-group-item {% if feedback_overview_nav %}active{% endif %}" href="{% tournamenturl 'adjfeedback-overview' %}" data-parent="#feedh">
        <i data-feather="maximize"></i>{% trans "Overview" %}
      </a>
      <a class="list-group-item {% if feedback_latest_nav %}active{% endif %}" href="{% tournamenturl 'adjfeedback-view-latest' %}" data-parent="#feedh">
        <i data-feather="clock"></i>Latest
      </a>
      <a class="list-group-item {% if feedback_source_nav %}active{% endif %}" href="{% tournamenturl 'adjfeedback-view-by-source' %}" data-parent="#feedh">
        <i data-feather="phone-outgoing"></i>Find by Source
      </a>
      <a class="list-group-item {% if feedback_target_nav %}active{% endif %}" href="{% tournamenturl 'adjfeedback-view-by-target' %}" data-parent="#feedh">
        <i data-feather="phone-incoming"></i>Find by Target
      </a>
      <a class="list-group-item {% if feedback_progress_nav %}active{% endif %}" href="{% tournamenturl 'feedback_progress' %}" data-parent="#feedh">
        <i data-feather="x-circle"></i>Unsubmitted
      </a>
      <a class="list-group-item" href="{% tournamenturl 'adjfeedback-add-index' %}">
        <i data-feather="plus-circle"></i>Add Feedback
      </a>
    </div>
  </div>

  <div class="list-group-item d-inline-block">
    <a href="#standh" data-toggle="collapse" data-parent="#sidebar" aria-expanded="false"
       data-parent="#sidebar" class="collapsed {% if standings_nav %}active{% endif %}">
      <i data-feather="bar-chart-2"></i>
      <span class="d-none d-md-inline">{% trans "Standings" %}</span>
      <i data-feather="chevron-down" class="sidebar-expand d-none d-md-inline"></i>
      <i data-feather="chevron-up" class="sidebar-expand d-none d-md-inline"></i>
    </a>
    <div class="collapse {% if standings_nav %}show{% endif %}" id="standh">
      <a href="{% roundurl 'standings-index' current_round %}"
         class="list-group-item {% if standings_overview_nav %}active{% endif %}" data-parent="#setuph">
        <i data-feather="maximize"></i>{% trans "Overview" %}
      </a>
      <a class="list-group-item {% if standings_team_nav %}active{% endif %}" href="{% roundurl 'standings-team' current_round %}">
        <i data-feather="users"></i>{% trans "Teams" %}
      </a>
      {% if pref.enable_divisions %}
      <a class="list-group-item {% if standings_division_nav %}active{% endif %}" href="{% roundurl 'standings-division' current_round %}">
        <i data-feather="layers"></i>{% trans "Divisions" %}
      </a>
      {% endif %}
      <a class="list-group-item {% if standings_speaker_nav %}active{% endif %}" href="{% roundurl 'standings-speaker' current_round %}">
        <i data-feather="speaker"></i>{% trans "Speakers" %}
      </a>
      {% if pref.reply_scores_enabled %}
        <a class="list-group-item {% if standings_reply_nav %}active{% endif %}"
           href="{% roundurl 'standings-reply' current_round %}">
          <i data-feather="users"></i>{% trans "Replies" %}
        </a>
      {% endif %}
      {% for category in tournament.speakercategory_set.all %}
        <a class="list-group-item {% if standings_active %}active{% endif %}" href="{% roundurl 'standings-speaker-category' round=current_round category=category.slug %}">
          <i data-feather="user"></i>{% blocktrans trimmed with category_name=category.name %}
            {{ category_name }} Speakers
          {% endblocktrans %}
        </a>
      {% endfor %}
      <a class="list-group-item {% if feedback_motions_nav %}active{% endif %}" href="{% roundurl 'standings-motion' current_round %}">
        <i data-feather="crosshair"></i>{% trans "Motions" %}
      </a>
      <a class="list-group-item {% if standings_diversity_nav %}active{% endif %}" href="{% roundurl 'standings-diversity' current_round %}">
        <i data-feather="globe"></i>{% trans "Diversity" %}
      </a>
    </div>
  </div>

  {% for r in tournament.rounds_for_nav %}
    {% ifchanged r.stage %}
      {% if r.stage == 'E' %}

        <div class="list-group-item d-inline-block">
          <a href="#breakh" data-toggle="collapse" data-parent="#sidebar" aria-expanded="false"
             class="collapsed {% if break_nav %}active{% endif %}">
            <i data-feather="target"></i>
            <span class="d-none d-md-inline">{% trans "Breaks" %}</span>
            <i data-feather="chevron-down" class="sidebar-expand d-none d-md-inline"></i>
            <i data-feather="chevron-up" class="sidebar-expand d-none d-md-inline"></i>
          </a>
          <div class="collapse {% if break_nav %}show{% endif %}" id="breakh">
            <a class="list-group-item {% if break_overview_nav %}active{% endif %}"
               href="{% tournamenturl 'breakqual-index' %}">
              <i data-feather="maximize"></i>{% trans "Overview" %}
            </a>
            {% for category in tournament.breakcategory_set.all %}
              <a class="list-group-item" href="{% tournamenturl 'breakqual-teams' category.slug %}">
                <i data-feather="pie-chart"></i>{% blocktrans trimmed with category_name=category.name %}{{ category_name }}{% endblocktrans %}
              </a>
            {% endfor %}
            <a class="list-group-item {% if break_adjudicators_nav %}active{% endif %}" href="{% tournamenturl 'breakqual-adjudicators' %}">
              <i data-feather="shield"></i>Adjudicators
            </a>
          </div>

        </div>

      {% endif %}
    {% endifchanged %}
    {% include 'nav/round_panel.html' %}
  {% endfor %}

  <div class="list-group-item d-inline-block">
    <a href="{% url 'logout' %}" data-parent="#sidebar"
     class="collapsed">
      <i data-feather="log-out"></i>
      <span class="d-none d-md-inline">{% blocktrans trimmed %}Log Out{% endblocktrans %}</span>
    </a>
  </div>

</div>
