{% extends "base_vue_table.html" %}
{% load debate_tags %}

{% block page-subnav-sections %}{% endblock %}<!-- No need for searching -->

{% block content %}

  <div class="row">
    <div class="col-md-12">

      <div class="alert alert-info">
        <h5>In {{ current_round.name }}</h5>
        {% if debateteam %}
          <div class="vertical-spacing">
            <p class="lead">
              {{ team.short_name }} is
              debating as the
              <strong><u>{{ debateteam.get_position_display }}</u></strong>
              against
              <strong><u>
                <a href="{% tournament_url participants-team-record debateteam.opposition.team.pk %}">
                {{ debateteam.opposition.team.short_name }}
                </a>
              </u></strong>
              in <strong><u>{{ debateteam.debate.venue.name }}</u></strong>{% if current_round.starts_at %}
                starting at <strong><u>{{ current_round.starts_at }}</u></strong>
              {% endif %}
            </p>
          </div>
          <p>
            They will be adjudicated by
            {% for adj, adjtype in debateteam.debate.adjudicators.with_positions %}
              {% if not forloop.first %},{% if forloop.last %} and{% endif %}{% endif %}
              <a href="{% tournament_url participants-adjudicator-record adj.pk %}">
                {{ adj.name }}
              </a>
              {% if adjtype == 'C' %}
                Ⓒ
              {% elif adjtype == 'T' %}
                Ⓣ
              {% endif %}
            {% endfor %}
          .
          </p>
          <p>
            They will debate
            {% if debateteam.debate.round.motion_set.all|length == 1 %}
              <em>"{{ debateteam.debate.round.motion_set.first.text }}"</em>
            {% else %}
              on one
              {% for motion in debateteam.debate.round.motion_set.all %}
                {% if not forloop.first %},{% if forloop.last %} or{% endif %}{% endif %}
                <em>"{{ motion.text }}"</em>
              {% endfor %}
            {% endif %}
            .
          </p>
        {% else %}
          <p class="lead">
            {{ team.short_name }} does not have a debate this round.
          </p>
        {% endif %}
      </div>

    </div>
  </div>

  <div class="row">

    <div class="col-md-4">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">Speakers</h4>
        </div>
        <ul class="list-group">
          {% for speaker in team.speakers %}
            <li class="list-group-item">
              {{ speaker.name }}
            </li>
          {% endfor %}
        </ul>
      </div>
    </div>

    <div class="col-md-4">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">Eligiblility</h4>
        </div>
        <ul class="list-group">
          {% for category in team.break_categories.all %}
            <li class="list-group-item">
              <span class="glyphicon glyphicon-ok"></span>
              {{ category.name }} Break
            </li>
          {% endfor %}
        </ul>
      </div>
    </div>

    {% if pref.show_institutions %}
      <div class="col-md-4">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 class="panel-title">Institution</h4>
          </div>
          <ul class="list-group">
            <li class="list-group-item">
              <strong>{{ team.institution.name }}</strong>
              ({{ team.institution.code }})
            </li>
            {% if team.institution.region %}
              <li class="list-group-item">
                From the '<strong>{{ team.institution.region }}</strong>' region.
              </li>
            {% endif %}
          </ul>
        </div>
      </div>
    {% endif %}

  </div>

  {% if pref.feedback_progress %}  <div class="row">

    <div class="col-md-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">Feedback Returns</h4>
        </div>
        <ul class="list-group">
          <li class="list-group-item text-success">
            <span class="badge">Round 5</span>
            <span class="glyphicon glyphicon-ok"></span> Has submitted feedback for
            <strong>John Smith</strong> of <strong>Monash</strong>
          </li>
          <li class="list-group-item text-danger">
            <span class="badge">Round 3</span>
            <span class="glyphicon glyphicon-remove"></span> Has not submitted feedback for
            <strong>Jane Smith</strong> of <strong>Melbourne</strong>
          </li>
        </ul>
      </div>
    </div>

  </div>
  {% endif %}

  {{ block.super }}

{% endblock content %}