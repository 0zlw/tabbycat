{% extends "base.html" %}
{% load i18n debate_tags %}

{% block page-title %}{% trans "Confirm Round Advance" as page_title %}{% endblock %}
{% block head-title %}
  <span class="emoji">üôè</span>{{ page_title }}
{% endblock %}
{% block sub-title %}{% blocktrans trimmed %}for {{ round.name }}{% endblocktrans %}{% endblock %}

{% block page-subnav-actions %}

  <a href="{% roundurl 'results-round-list' %}" class="btn btn-outline-primary">
    <i data-feather="chevron-left"></i>{% trans "Enter Results" %}
  </a>

  <form action="{% roundurl 'tournament-send-standings-emails' %}" method="POST">
    {% csrf_token %}
    <button class="btn btn-outline-primary active" id="sendPointsEmails" type="submit">
      {% if pref.teams_in_debate == "two" %}
        {% trans "Email Team Wins/Losses" %}
      {% else %}
        {% trans "Email Team Points" %}
      {% endif %}
    </button>
  </form>

  <form action="{% roundurl 'tournament-advance-round' %}" method="POST">
    {% csrf_token %}
    <button class="btn {{increment_ok|yesno:"btn-success,btn-danger"}}" id="createDraw" type="submit">
      {% if increment_ok %}
        {% trans "Advance to Next Round" %}
        <i data-feather="chevron-right"></i>
      {% else %}
        {% trans "Advance Anyway" %}
        <i data-feather="chevron-right"></i>
      {% endif %}
    </button>
  </form>

{% endblock %}

{% block page-alerts %}

  {% if increment_ok %}
    <div class="alert alert-success">
      <i data-feather="alert-circle"></i>
      {% blocktrans trimmed %}It looks like all the ballots from {{ round.name }} are confirmed, you should be good to go.{% endblocktrans %}
    </div>
  {% else %}
    <div class="alert alert-danger">
      <i data-feather="alert-circle"></i>
      {% blocktrans trimmed %}There are still {{ num_unconfirmed }}
      ballots that are not confirmed. You should <strong>not</strong>
      proceed to the next round until all ballots are confirmed.{% endblocktrans %}
    </div>
  {% endif %}

  {% if pref.public_results > 0 %}
    <div class="alert alert-info">
      <i data-feather="alert-circle"></i>
      {% trans 'The "show public results" setting is on and this round' %}
      {% if round.silent %}
        {% blocktrans trimmed %}<strong>is marked as a silent round</strong>, so <strong>no results
        will show on the public page</strong> when you advance.{% endblocktrans %}
      {% else %}
        {% blocktrans trimmed %}<strong>is not marked as a silent round</strong> so the <strong>results
        will show on the public</strong> page when you advance.{% endblocktrans %}
      {% endif %}
      {% url 'admin:index' as admin_url %}
      {% blocktrans trimmed %}A round can be marked/unmarked as silent in the
      <a href="{{ admin_url }}">edit database area</a>
       under <em>Tournaments > Rounds</em>.{% endblocktrans %}
    </div>
  {% endif %}

{% endblock %}
