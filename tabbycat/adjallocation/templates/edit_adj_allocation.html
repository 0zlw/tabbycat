{% extends "base.html" %}
{% load debate_tags %}

{% block nav %}{% endblock %}
{% block header %}{% endblock %}
{% block subheader %}{% endblock %}
{% block footer %}{% endblock %}
{% block page-subnav-sections %}{% endblock page-subnav-sections %}

{% block content %}

  <allocation-container
    :debates=allDebates
    :adjudicators=allAdjudicators
    :teams=allTeams
    :regions=allRegions
    :categories=allCategories
    :urls=urls>
  </allocation-container>

  <div class="modal fade" id="modalAlert" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header h4 text-danger"></div>
        <div class="modal-body"></div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="confirmAutoAlert" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-body">
          <p class="lead">Using auto-allocate will <strong>remove all currently allocated adjudicators</strong> and
          re-allocate them.</p>
          <p class="lead">It will granting stronger panels to debates that have been assigned higher importances.
          If importances have not been set, or are equivalent, it will give instead give stronger panels to
          debates of a higher bracket.</p>
          <form action="{% round_url create_auto_allocation %}" method="POST">
            {% csrf_token %}
            <button type="submit" class="btn btn-block btn-success">
              Create Automatic Allocation
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>

{% endblock content %}

{% block js %}

  <script>
    var allDebates = {{ allDebates|safe }};
    var allAdjudicators = {{ allAdjudicators|safe }};
    var allTeams = {{ allTeams|safe }};
    var allRegions = {{ allRegions|safe }};
    var allCategories = {{ allCategories|safe }};

    var urls = {
      'backToDraw': '{% round_url draw %}',
      'updateImportance': '{% round_url save_debate_importance %}',
      'updatePanel': '{% round_url save_debate_panel %}',
    }


  </script>
  {{ block.super }}

{% endblock js %}
