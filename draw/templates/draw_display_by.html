{% extends "base.html" %}
{% load debate_tags %}
{% load static %}

{% block head-title %}
  <span class="emoji">üëè</span>Draw for {{ round.name }}
  {% if round.starts_at %}
  <small>debates start at {{ round.starts_at }}</small>
  {% endif %}
{% endblock %}
{% block page-title %}Draw for {{ round.name }}{% endblock %}
{% block sub-title %}ESC stops scroll{% endblock %}

{% block nav %}
  {# For admins the draw opens without menu (for displaying publicly)#}
  {% if 'admin/' in request.path and user.is_superuser %}
    <div class="col-md-12">
  {% else %}
    {{ block.super }}
  {% endif %}
{% endblock %}

{% block footer %}{% endblock %}

{% block page-subnav-sections %}
  <span class="btn btn-secondary">Scroll</span>
  <div class="btn-group hidden-xs">
    <a class="btn btn-default" href="" id="scroll_draw1">Fast</a>
    <a class="btn btn-default" href="" id="scroll_draw2"><span class="hidden-xs">Medium</span></a>
    <a class="btn btn-default" href="" id="scroll_draw3">Slow</a>
    <a class="btn btn-default" href="" id="scroll_draw4">XS</a>
    <a class="btn btn-default" href="" id="scroll_draw5">XXS</a>
  </div>
  <span class="btn btn-secondary">Text</span>
  <div class="btn-group">
    <a class="btn btn-default" href="" id="tiny_text">XS</a>
    <a class="btn btn-default" href="" id="small_text">S</a>
    <a class="btn btn-default active" href="" id="medium_text">M</a>
    <a class="btn btn-default" href="" id="large_text">L</a>
    <a class="btn btn-default" href="" id="huge_text">XL</a>
  </div>
  {% include "tables/table_search.html" %}
{% endblock %}

{% block extra-js %}
{% include "vue/import-vue.html" %}
{% include "vue/table.vue" %}
  <script>
    var fromTeamsTable = new Vue({
      el: '#tableContainer',
      data: {
        searchQuery: '',
        gridData: {{ tableData|safe }}
      },
      ready: function() {
        var thisTable = this; // this in the next context is the element
        $('#table-search').keyup(function(){
          thisTable.$set('searchQuery', $(this).val());
        })
      },
      computed: {
        gridColumns: function () {
          var firstRow = this.gridData[0];
          var columns = Object.keys(firstRow);
          console.log(columns);
          return columns
        },
      }

    })
  </script>
  <script src="{% static 'js/scroller.min.js' %}"></script>
{% endblock extra-js %}
